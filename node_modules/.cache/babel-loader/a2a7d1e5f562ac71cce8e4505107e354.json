{"ast":null,"code":"import _slicedToArray from \"/home/teemu/Omat/Koulu/kesaopinnot/web_ohjelmointi/harjtyo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/teemu/Omat/Koulu/kesaopinnot/web_ohjelmointi/harjtyo/src/Stats.js\";\nimport React, { useState } from 'react'; //npm install --save react-chartjs-2 chart.js\n\nimport { HorizontalBar } from 'react-chartjs-2';\n/* Component for Statistics-page contents */\n\nconst Stats = ({\n  teamdata\n}) => {\n  //state to keep of track of what player roles should be included in the chart\n  const _useState = useState(\"kaikki\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        showroles = _useState2[0],\n        setShowroles = _useState2[1]; //state to keep track of the type of statistics to be shown in the chart\n\n\n  const _useState3 = useState(\"Tehopisteet\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        statstype = _useState4[0],\n        setStatstype = _useState4[1]; //handler that changes states based on the dropdown list changes\n\n\n  const selectionHandler = event => {\n    //\"role\" is the id of dropdown list of player roles kaikki/hyökkääjät/puolustajat\n    if (event.target.id === \"role\") setShowroles(event.target.value); //\"stat\" is the id of dropdown list of statistics that can be displayed in the chart\n\n    if (event.target.id === \"stat\") setStatstype(event.target.value);\n  }; //settings of the horizontal bar chart\n\n\n  const barOptions = {\n    //responsive \"true\" to make chart canvas scale to screen\n    responsive: true,\n    maintainAspectRatio: false,\n    tooltips: {\n      titleFontSize: 20,\n      bodyFontSize: 20\n    },\n    title: {\n      display: true,\n      text: statstype + ' top10: ' + showroles,\n      fontSize: 24\n    },\n    legend: {\n      display: false\n    },\n    scales: {\n      yAxes: [{\n        ticks: {\n          fontSize: 20\n        }\n      }],\n      xAxes: [{\n        position: 'top',\n        ticks: {\n          beginAtZero: true,\n          fontSize: 20,\n          precision: 0 // ticks are always one integer 1,2,3,4... NOT like 0.5,1.0,1.5\n\n        }\n      }]\n    }\n  }; //create list of player objects with information that is chosen by the user\n\n  let players = {}; //map the teamdata.players property shared by the Parent component\n\n  players = teamdata.players.map(player => {\n    if (showroles === \"hyökkääjät\" && player.role !== \"hyökkääjä\") {\n      //do not include role that is not selected by the user in the dropdown list\n      return null;\n    }\n\n    ;\n\n    if (showroles === \"puolustajat\" && player.role !== \"puolustaja\") {\n      //do not include role that is not selected by the user in the dropdown list\n      return null;\n    }\n\n    ; //if the user has chosen to display \"Tehopisteet\" from dropdown \n    //this info will be included to player objects\n\n    if (statstype === \"Tehopisteet\") {\n      //calculate the points (scores + assists) made by the player in all matches\n      let points = 0;\n\n      for (let i = 0; i < teamdata.matches.length; i++) {\n        for (let k = 0; k < teamdata.matches[i].scorers.length; k++) {\n          if (teamdata.matches[i].scorers[k] === player.id) {\n            points++;\n          }\n\n          if (teamdata.matches[i].assists[k] === player.id) {\n            points++;\n          }\n        }\n      }\n\n      return {\n        name: player.lname + \" \" + player.fname[0] + \".\",\n        points: points\n      };\n    } //if the user has chosen to display \"Maalit\" from dropdown\n    //this info will be included to player objects\n    else if (statstype === \"Maalit\") {\n        //calculate the scores made by the player in all matches\n        let scores = 0;\n\n        for (let i = 0; i < teamdata.matches.length; i++) {\n          for (let k = 0; k < teamdata.matches[i].scorers.length; k++) {\n            if (teamdata.matches[i].scorers[k] === player.id) {\n              scores++;\n            }\n          }\n        }\n\n        return {\n          name: player.lname + \" \" + player.fname[0] + \".\",\n          scores: scores\n        };\n      } //if the user has chosen to display \"Syöttöpisteet\" from dropdown\n      //this info will be included to player objects\n      else if (statstype === \"Syöttöpisteet\") {\n          //calculate the assists made by the player in all matches\n          let assists = 0;\n\n          for (let i = 0; i < teamdata.matches.length; i++) {\n            for (let k = 0; k < teamdata.matches[i].scorers.length; k++) {\n              if (teamdata.matches[i].assists[k] === player.id) {\n                assists++;\n              }\n            }\n          }\n\n          return {\n            name: player.lname + \" \" + player.fname[0] + \".\",\n            assists: assists\n          };\n        } //if the user has chosen to display \"Osall. harjoituksiin\" from dropdown\n        //this info will be included to player objects\n        else if (statstype === \"Osall. harjoituksiin\") {\n            //calculate the entries made by the player in all matches\n            let entries = 0;\n\n            for (let i = 0; i < teamdata.matches.length; i++) {\n              for (let k = 0; k < teamdata.matches[i].participants.length; k++) {\n                if (teamdata.matches[i].participants[k] === player.id) {\n                  entries++;\n                }\n              }\n            }\n\n            return {\n              name: player.lname + \" \" + player.fname[0] + \".\",\n              entries: entries\n            };\n          } //if the user has chosen to display \"Osall. peleihin\" from dropdown\n          //this info will be included to player objects\n          else if (statstype === \"Osall. peleihin\") {\n              //calculate the scores made by the player in all practises\n              let entries = 0;\n\n              for (let i = 0; i < teamdata.practises.length; i++) {\n                for (let k = 0; k < teamdata.practises[i].participants.length; k++) {\n                  if (teamdata.practises[i].participants[k] === player.id) {\n                    entries++;\n                  }\n                }\n              }\n\n              return {\n                name: player.lname + \" \" + player.fname[0] + \".\",\n                entries: entries\n              };\n            } //if the user has not chosen any statistic type in the dropdown (should never happen)\n\n\n    return null;\n  }); //filter null elements from array\n\n  players = players.filter(e => e != null); //sort the player list depending on what statistics is chosen\n\n  let chartdata = {};\n\n  if (statstype === \"Tehopisteet\") {\n    players.sort((a, b) => a.points < b.points ? 1 : a.points > b.points ? -1 : 0);\n    chartdata = players.map(player => player.points);\n  } else if (statstype === \"Maalit\") {\n    players.sort((a, b) => a.scores < b.scores ? 1 : a.scores > b.scores ? -1 : 0);\n    chartdata = players.map(player => player.scores);\n  } else if (statstype === \"Syöttöpisteet\") {\n    players.sort((a, b) => a.assists < b.assists ? 1 : a.assists > b.assists ? -1 : 0);\n    chartdata = players.map(player => player.assists);\n  } else if (statstype === \"Osall. harjoituksiin\" || statstype === \"Osall. peleihin\") {\n    players.sort((a, b) => a.entries < b.entries ? 1 : a.entries > b.entries ? -1 : 0);\n    chartdata = players.map(player => player.entries);\n  } //include only top 10 in the player list\n\n\n  chartdata = chartdata.slice(0, 10); //create labels for the players in the chart\n\n  let chartlabels = players.map(player => player.name); //include only top 10, so amount of chartdata and labels match\n\n  chartlabels = chartlabels.slice(0, 10); //put all the info created into a single variable that can be passed to Chart.js HorizontalBar-component\n\n  const data = {\n    labels: chartlabels,\n    datasets: [{\n      label: statstype,\n      backgroundColor: 'green',\n      borderColor: 'green',\n      data: chartdata\n    }]\n  };\n  return React.createElement(\"div\", {\n    id: \"chartContainer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, \"Rooli: \", React.createElement(\"select\", {\n    id: \"role\",\n    value: showroles,\n    onChange: selectionHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    key: \"all\",\n    value: \"kaikki\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"Kaikki\"), React.createElement(\"option\", {\n    key: \"forwards\",\n    value: \"hy\\xF6kk\\xE4\\xE4j\\xE4t\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, \"Hy\\xF6kk\\xE4\\xE4j\\xE4t\"), React.createElement(\"option\", {\n    key: \"defenders\",\n    value: \"puolustajat\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, \"Puolustajat\")), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }), \"Tilasto: \", React.createElement(\"select\", {\n    id: \"stat\",\n    value: statstype,\n    onChange: selectionHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    key: \"Tehopisteet\",\n    value: \"Tehopisteet\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, \"Tehopisteet\"), React.createElement(\"option\", {\n    key: \"Maalit\",\n    value: \"Maalit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, \"Maalit\"), React.createElement(\"option\", {\n    key: \"Sy\\xF6tt\\xF6pisteet\",\n    value: \"Sy\\xF6tt\\xF6pisteet\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, \"Sy\\xF6tt\\xF6pisteet\"), React.createElement(\"option\", {\n    key: \"Osall.harj\",\n    value: \"Osall. harjoituksiin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, \"Osall. harjoituksiin\"), React.createElement(\"option\", {\n    key: \"Osall.pelit\",\n    value: \"Osall. peleihin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, \"Osall. peleihin\")), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }), React.createElement(HorizontalBar, {\n    data: data,\n    options: barOptions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }));\n};\n\nexport default Stats;","map":{"version":3,"sources":["/home/teemu/Omat/Koulu/kesaopinnot/web_ohjelmointi/harjtyo/src/Stats.js"],"names":["React","useState","HorizontalBar","Stats","teamdata","showroles","setShowroles","statstype","setStatstype","selectionHandler","event","target","id","value","barOptions","responsive","maintainAspectRatio","tooltips","titleFontSize","bodyFontSize","title","display","text","fontSize","legend","scales","yAxes","ticks","xAxes","position","beginAtZero","precision","players","map","player","role","points","i","matches","length","k","scorers","assists","name","lname","fname","scores","entries","participants","practises","filter","e","chartdata","sort","a","b","slice","chartlabels","data","labels","datasets","label","backgroundColor","borderColor"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n//npm install --save react-chartjs-2 chart.js\nimport { HorizontalBar } from 'react-chartjs-2';\n\n/* Component for Statistics-page contents */\nconst Stats = ({ teamdata }) => {\n  //state to keep of track of what player roles should be included in the chart\n  const [showroles, setShowroles] = useState(\"kaikki\");\n  //state to keep track of the type of statistics to be shown in the chart\n  const [statstype, setStatstype] = useState(\"Tehopisteet\");\n\n  //handler that changes states based on the dropdown list changes\n  const selectionHandler = (event) => {\n    //\"role\" is the id of dropdown list of player roles kaikki/hyökkääjät/puolustajat\n    if (event.target.id === \"role\") setShowroles(event.target.value);\n    //\"stat\" is the id of dropdown list of statistics that can be displayed in the chart\n    if (event.target.id === \"stat\") setStatstype(event.target.value);\n  }\n\n  //settings of the horizontal bar chart\n  const barOptions = {\n    //responsive \"true\" to make chart canvas scale to screen\n    responsive: true,\n    maintainAspectRatio: false,\n    tooltips: {\n      titleFontSize: 20,\n      bodyFontSize: 20\n    },\n    title: {\n      display: true,\n      text: statstype + ' top10: ' + showroles,\n      fontSize: 24\n    },\n    legend: {\n      display: false\n    },\n    scales: {\n      yAxes: [{\n        ticks: {\n          fontSize: 20\n        }\n      }],\n      xAxes: [{\n        position: 'top',\n        ticks: {\n          beginAtZero: true,\n          fontSize: 20,\n          precision: 0 // ticks are always one integer 1,2,3,4... NOT like 0.5,1.0,1.5\n        }\n      }]\n    }\n  };\n\n  //create list of player objects with information that is chosen by the user\n  let players = {};\n  //map the teamdata.players property shared by the Parent component\n  players = teamdata.players.map((player) => {\n\n    if (showroles === \"hyökkääjät\" && player.role !== \"hyökkääjä\") {\n      //do not include role that is not selected by the user in the dropdown list\n      return null;\n    };\n    if (showroles === \"puolustajat\" && player.role !== \"puolustaja\") {\n      //do not include role that is not selected by the user in the dropdown list\n      return null;\n    };\n\n    //if the user has chosen to display \"Tehopisteet\" from dropdown \n    //this info will be included to player objects\n    if (statstype === \"Tehopisteet\") {\n      //calculate the points (scores + assists) made by the player in all matches\n      let points = 0;\n      for (let i = 0; i < teamdata.matches.length; i++) {\n        for (let k = 0; k < teamdata.matches[i].scorers.length; k++) {\n          if (teamdata.matches[i].scorers[k] === player.id) {\n            points++;\n          }\n          if (teamdata.matches[i].assists[k] === player.id) {\n            points++;\n          }\n        }\n      }\n      return ({\n        name: player.lname + \" \" + player.fname[0] + \".\",\n        points: points\n      })\n    }\n    //if the user has chosen to display \"Maalit\" from dropdown\n    //this info will be included to player objects\n    else if (statstype === \"Maalit\") {\n      //calculate the scores made by the player in all matches\n      let scores = 0;\n      for (let i = 0; i < teamdata.matches.length; i++) {\n        for (let k = 0; k < teamdata.matches[i].scorers.length; k++) {\n          if (teamdata.matches[i].scorers[k] === player.id) {\n            scores++;\n          }\n        }\n      }\n      return ({\n        name: player.lname + \" \" + player.fname[0] + \".\",\n        scores: scores\n      })\n    }\n    //if the user has chosen to display \"Syöttöpisteet\" from dropdown\n    //this info will be included to player objects\n    else if (statstype === \"Syöttöpisteet\") {\n      //calculate the assists made by the player in all matches\n      let assists = 0;\n      for (let i = 0; i < teamdata.matches.length; i++) {\n        for (let k = 0; k < teamdata.matches[i].scorers.length; k++) {\n          if (teamdata.matches[i].assists[k] === player.id) {\n            assists++;\n          }\n        }\n      }\n      return ({\n        name: player.lname + \" \" + player.fname[0] + \".\",\n        assists: assists\n      })\n    }\n    //if the user has chosen to display \"Osall. harjoituksiin\" from dropdown\n    //this info will be included to player objects\n    else if (statstype === \"Osall. harjoituksiin\") {\n      //calculate the entries made by the player in all matches\n      let entries = 0;\n      for (let i = 0; i < teamdata.matches.length; i++) {\n        for (let k = 0; k < teamdata.matches[i].participants.length; k++) {\n          if (teamdata.matches[i].participants[k] === player.id) {\n            entries++;\n          }\n        }\n      }\n      return ({\n        name: player.lname + \" \" + player.fname[0] + \".\",\n        entries: entries\n      })\n    }\n    //if the user has chosen to display \"Osall. peleihin\" from dropdown\n    //this info will be included to player objects\n    else if (statstype === \"Osall. peleihin\") {\n      //calculate the scores made by the player in all practises\n      let entries = 0;\n      for (let i = 0; i < teamdata.practises.length; i++) {\n        for (let k = 0; k < teamdata.practises[i].participants.length; k++) {\n          if (teamdata.practises[i].participants[k] === player.id) {\n            entries++;\n          }\n        }\n      }\n      return ({\n        name: player.lname + \" \" + player.fname[0] + \".\",\n        entries: entries\n      })\n    }\n    //if the user has not chosen any statistic type in the dropdown (should never happen)\n    return null;\n  });\n\n  //filter null elements from array\n  players = players.filter((e) => e != null);\n\n  //sort the player list depending on what statistics is chosen\n  let chartdata = {};\n  if (statstype === \"Tehopisteet\") {\n    players.sort((a, b) => (a.points < b.points) ? 1 : (a.points > b.points) ? -1 : 0);\n    chartdata = players.map((player) => player.points);\n  }\n  else if (statstype === \"Maalit\") {\n    players.sort((a, b) => (a.scores < b.scores) ? 1 : (a.scores > b.scores) ? -1 : 0);\n    chartdata = players.map((player) => player.scores);\n  }\n  else if (statstype === \"Syöttöpisteet\") {\n    players.sort((a, b) => (a.assists < b.assists) ? 1 : (a.assists > b.assists) ? -1 : 0);\n    chartdata = players.map((player) => player.assists);\n  }\n  else if (statstype === \"Osall. harjoituksiin\" || statstype === \"Osall. peleihin\") {\n    players.sort((a, b) => (a.entries < b.entries) ? 1 : (a.entries > b.entries) ? -1 : 0);\n    chartdata = players.map((player) => player.entries);\n  }\n  //include only top 10 in the player list\n  chartdata = chartdata.slice(0, 10);\n\n  //create labels for the players in the chart\n  let chartlabels = players.map((player) => player.name);\n  //include only top 10, so amount of chartdata and labels match\n  chartlabels = chartlabels.slice(0, 10);\n\n  //put all the info created into a single variable that can be passed to Chart.js HorizontalBar-component\n  const data = {\n    labels: chartlabels,\n    datasets: [{\n      label: statstype,\n      backgroundColor: 'green',\n      borderColor: 'green',\n      data: chartdata,\n    }]\n  };\n\n  return (<div id=\"chartContainer\">\n    Rooli: <select id=\"role\" value={showroles} onChange={selectionHandler}>\n      <option key=\"all\" value=\"kaikki\">Kaikki</option>\n      <option key=\"forwards\" value=\"hyökkääjät\">Hyökkääjät</option>\n      <option key=\"defenders\" value=\"puolustajat\">Puolustajat</option>\n    </select><br />\n    Tilasto: <select id=\"stat\" value={statstype} onChange={selectionHandler}>\n      <option key=\"Tehopisteet\" value=\"Tehopisteet\">Tehopisteet</option>\n      <option key=\"Maalit\" value=\"Maalit\">Maalit</option>\n      <option key=\"Syöttöpisteet\" value=\"Syöttöpisteet\">Syöttöpisteet</option>\n      <option key=\"Osall.harj\" value=\"Osall. harjoituksiin\">Osall. harjoituksiin</option>\n      <option key=\"Osall.pelit\" value=\"Osall. peleihin\">Osall. peleihin</option>\n    </select>\n    <hr />\n    <HorizontalBar data={data} options={barOptions} />\n  </div>\n  );\n}\n\nexport default Stats;"]},"metadata":{},"sourceType":"module"}